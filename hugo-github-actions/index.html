<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>利用 GitHub Action 自動部署 Hugo 部落格 - 勝勝</title><meta name=description content="在 commit 後讓 GitHub 幫你直接部署網站！"><meta name=author content="勝勝"><link href=https://blog.gnehs.net/an-old-hope.min.css rel=stylesheet><link href=https://blog.gnehs.net/style.css rel=stylesheet><link href=https://blog.gnehs.net/custom.css rel=stylesheet><link rel=apple-touch-icon href=/favicon.png><link rel=icon href=/favicon.png><meta name=generator content="Hugo 0.81.0"><meta property="og:title" content="利用 GitHub Action 自動部署 Hugo 部落格"><meta property="og:description" content="在 commit 後讓 GitHub 幫你直接部署網站！"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.gnehs.net/hugo-github-actions/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-31T11:17:50+08:00"><meta property="article:modified_time" content="2021-03-31T11:17:50+08:00"><meta property="og:image" content="https://blog.gnehs.net/img/hugo-github-actions.png"><meta name=twitter:card content="summary_large_image"><script>function setTheme(){if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');return}const c=new Date,g=localStorage.getItem('date'),d=String(c.getMonth()+1)+'.'+String(c.getDate()),e=c.getTime();let a,b;function f(){if(e>a&&e<b)return;document.body.classList.add('dark')}d!==g?(fetch('https://api.ipgeolocation.io/astronomy?apiKey=5ed37d85103e4defa5df4c5298ed5215').then(a=>a.json()).then(c=>{a=c.sunrise.split(':').map(Number),b=c.sunset.split(':').map(Number)}).catch(()=>{a=[7,0],b=[19,0]}).finally(()=>{a=c.setHours(a[0],a[1],0),b=c.setHours(b[0],b[1],0),f(),localStorage.setItem('sunrise',a),localStorage.setItem('sunset',b)}),localStorage.setItem('date',d)):(a=Number(localStorage.getItem('sunrise')),b=Number(localStorage.getItem('sunset')),f())}</script></head><body class=single><script>setTheme()</script><header class=header><nav class=nav><p class=logo><a href=https://blog.gnehs.net>勝勝</a></p><ul class=menu><li><a href=/invite-codes/>邀請碼</a></li><li><a href=/categories/>分類</a></li><li><a href=/about/>關於</a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>利用 GitHub Action 自動部署 Hugo 部落格</h1><div class=post-meta>勝勝 · 2021 年 03 月 31 日</div></header><div class=overtime-alert style=display:none>⚠️ 本篇文章距離撰寫時間已超過兩年，部分資訊可能已過時。</div><script>let modifiedTime=new Date(document.querySelector('meta[property="article:modified_time"]').getAttribute('content'));(new Date).getTime()-modifiedTime.getTime()>1e3*60*60*24*365*2&&(document.querySelector('.overtime-alert').style.display='block')</script><div class=post-content><p>在 commit 後讓 GitHub 幫你直接部署網站！</p><h1 id=在-github-建立-repo>在 GitHub 建立 Repo</h1><p>註冊並登入 GitHub 後，點右上角的 New Repository，並填寫 Repo 名稱等資訊便可建立 Repo。</p><h1 id=上傳部落格原始碼>上傳部落格原始碼</h1><p>對於剛使用 GitHub 的新手，最簡單的方式是將部落格原始碼直接拖拉到你的儲存庫頁面便可完成上傳。</p><p>你也可以使用 Git 客戶端來上傳，這會讓未來新增文章時更加方便。</p><h1 id=建立-workflow>建立 Workflow</h1><p>新增 <code>.github/workflows/build.yaml</code> 檔案並填入下方的資料即可建立 Workflow 了，每次當你推送 commit 時，GitHub 會幫你自動部署到 Github Pages 上頭。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Github-Pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main</span> <span style=color:#75715e>#你的 branch 名稱</span>
<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v1</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#34;0.81.0&#34;</span> <span style=color:#75715e># hugo 版本，建議填寫與你電腦相符的版本</span>
          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --gc --minify --cleanDestinationDir</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_branch</span>: <span style=color:#ae81ff>public</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
          <span style=color:#f92672>force_orphan</span>: <span style=color:#66d9ef>true</span>
          <span style=color:#75715e>#cname: aaa.bbb.com # 你的網域名稱，填寫此項便會自動建立 CNAME 檔案（注意：你必須將 DNS 記錄指向 GitHub Pages）</span>
</code></pre></div><h1 id=設定-github-pages>設定 GitHub Pages</h1><p><img src=/img/tg_image_244516670.jpeg alt></p><p>在填寫完成 workflow 後，如果沒出差錯的話你部署完成的部落格應該會在 public 分支（branch）</p><p>接下來僅需幾個步驟即可讓部落格上線！</p><p>在 Repo 頁面的上方標前欄中選擇 Settings 在下面你可以找到 GitHub Pages 區塊。</p><ul><li>Source: 選擇 public</li><li>Custom domain: 若你想放在自訂域名上你要填寫這項，並參考 <a href=https://docs.github.com/en/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site>Configuring a custom domain for your GitHub Pages site</a> 來設定你域名的 DNS</li></ul><p>都填好後按下 Save 你的部落格就正式上線了！</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.gnehs.net/tags/actions>actions</a></li><li><a href=https://blog.gnehs.net/tags/hugo>hugo</a></li></ul></footer><br><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-6834090314855499 data-ad-slot=2767030263></ins></article></main><footer class=footer><span>&copy; 2017-2025 <a href=https://gnehs.net/>勝勝</a>可愛</span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</span>
<span>&#183;</span>
<span>Theme️ <a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper</a></span></footer><script src=https://blog.gnehs.net/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-96NRMGGV7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-96NRMGGV7E')</script></body></html>